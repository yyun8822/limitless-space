<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Product Detail - Limitless Space</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="top">
    <button class="menu-btn" onclick="toggleMenu()">☰</button>
    <div class="logo">Limitless Space</div>
    <div class="lang">
      <button onclick="changeLang('en')">EN</button>
      <button onclick="changeLang('zh')">中文</button>
    </div>

    <div class="menu" id="menu">
      <h3 data-en="Categories" data-zh="分类">Categories</h3>
      <div class="cat-list">
        <button onclick="setCategory('T恤')">T恤</button>
        <button onclick="setCategory('连帽衫')">连帽衫</button>
        <button onclick="setCategory('裙子')">裙子</button>
        <button onclick="setCategory('外套')">外套</button>
        <button onclick="setCategory('短裤')">短裤</button>
        <button onclick="setCategory('长裤')">长裤</button>
      </div>
      <h3 data-en="Search" data-zh="搜索">Search</h3>
      <input id="searchInput" type="text" placeholder="Search..." oninput="applyFilter()" />
      <button class="menu-close" onclick="toggleMenu()">Close</button>
    </div>
  </header>

  <main>
    <section class="detail">
      <div class="detail-img">
        <img id="detailImage" src="" alt="Product" />
      </div>
      <div class="detail-info">
        <h2 id="detailName" data-en="" data-zh=""></h2>
        <p id="detailPrice" data-en="" data-zh=""></p>

        <div class="options">
          <label data-en="Size" data-zh="尺寸">Size</label>
          <select id="sizeSelect"></select>
        </div>

        <div class="options">
          <label data-en="Color" data-zh="颜色">Color</label>
          <select id="colorSelect"></select>
        </div>

        <button id="addDetailCart" class="checkout" data-en="Add to Cart" data-zh="加入购物车">Add to Cart</button>
      </div>
    </section>
  </main>

  <footer>
    <p data-en="© 2026 Limitless Space. Made in Malaysia." data-zh="© 2026 Limitless Space。马来西亚制造。">
      © 2026 Limitless Space. Made in Malaysia.
    </p>
  </footer>

  <script src="script.js"></script>
  <script>
    function getQueryParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    function loadDetail() {
      const id = Number(getQueryParam("id"));
      const product = products.find(p => p.id === id);
      if (!product) return;

      document.getElementById("detailImage").src = product.image;
      document.getElementById("detailName").setAttribute("data-en", product.name_en);
      document.getElementById("detailName").setAttribute("data-zh", product.name_zh);
      document.getElementById("detailName").innerText = currentLang === "zh" ? product.name_zh : product.name_en;

      document.getElementById("detailPrice").setAttribute("data-en", `RM ${product.price}`);
      document.getElementById("detailPrice").setAttribute("data-zh", `RM ${product.price}`);
      document.getElementById("detailPrice").innerText = `RM ${product.price}`;

      const sizeSelect = document.getElementById("sizeSelect");
      sizeSelect.innerHTML = "";
      product.sizes.forEach(s => {
        sizeSelect.innerHTML += `<option value="${s}">${s}</option>`;
      });

      const colorSelect = document.getElementById("colorSelect");
      colorSelect.innerHTML = "";
      product.colors.forEach(c => {
        colorSelect.innerHTML += `<option value="${c}">${c}</option>`;
      });

      document.getElementById("addDetailCart").onclick = function() {
        const size = sizeSelect.value;
        const color = colorSelect.value;
        addToCart(product, size, color);
        alert("Added to cart");
      };

      translate();
    }

    loadDetail();
  </script>
</body>
</html>
